# public.users

## Description

## Columns

| Name                                | Type                           | Default                           | Nullable | Children                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Parents                                               |
| ----------------------------------- | ------------------------------ | --------------------------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------- |
| id                                  | bigint                         | nextval('users_id_seq'::regclass) | false    | [public.users](public.users.md) [public.speciality_user](public.speciality_user.md) [public.contracts](public.contracts.md) [public.certifications](public.certifications.md) [public.imaging_licenses](public.imaging_licenses.md) [public.doctor_licenses](public.doctor_licenses.md) [public.companies](public.companies.md) [public.patients](public.patients.md) [public.checkups](public.checkups.md) [public.reports](public.reports.md) [public.signoffs](public.signoffs.md) [public.company_lots](public.company_lots.md) [public.recent_searches](public.recent_searches.md) [public.copper_users](public.copper_users.md) [public.company_user](public.company_user.md) [public.company_patients](public.company_patients.md) [public.company_patient_visits](public.company_patient_visits.md) [public.change_requests](public.change_requests.md) [public.test_sets](public.test_sets.md) [public.company_orders](public.company_orders.md) [public.checkup_history_records](public.checkup_history_records.md) [public.devices](public.devices.md) [public.notification_setting_user](public.notification_setting_user.md) [public.imaging_diagnostic_data](public.imaging_diagnostic_data.md) [public.imaging_diagnostic_data_histories](public.imaging_diagnostic_data_histories.md) [public.etl_jobs](public.etl_jobs.md) [public.prescription_doctors](public.prescription_doctors.md) [public.user_medical_facilities](public.user_medical_facilities.md) |                                                       |
| email                               | varchar(255)                   |                                   | true     | [public.password_resets](public.password_resets.md)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                       |
| password                            | varchar(255)                   |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| first_name                          | varchar(255)                   |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| middle_name                         | varchar(255)                   |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| family_name                         | varchar(255)                   |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| address                             | varchar(255)                   |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| date_of_birth                       | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| branch_id                           | bigint                         |                                   | false    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.branches](public.branches.md)                 |
| changed_password_at                 | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| created_at                          | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| updated_at                          | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| sex_id                              | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.sexes](public.sexes.md)                       |
| user_status_id                      | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.user_statuses](public.user_statuses.md)       |
| nationality_id                      | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.nationalities](public.nationalities.md)       |
| city_id                             | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.cities](public.cities.md)                     |
| image_id                            | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.files](public.files.md)                       |
| signature_image_id                  | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.files](public.files.md)                       |
| position_id                         | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.positions](public.positions.md)               |
| mobile_number_id                    | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.phone_numbers](public.phone_numbers.md)       |
| home_number_id                      | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.phone_numbers](public.phone_numbers.md)       |
| bank_id                             | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.banks](public.banks.md)                       |
| created_by_user_id                  | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.users](public.users.md)                       |
| deactivated_at                      | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| verification_token                  | varchar(255)                   |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| verification_token_expires_at       | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| verification_link_sent_at           | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| verification_link_sending_failed_at | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| is_registered_with                  | varchar(255)                   |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| profile_status_id                   | bigint                         |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [public.profile_statuses](public.profile_statuses.md) |
| deactivating_status                 | varchar(20)                    |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| bipo_id                             | varchar(20)                    |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| reject_reason                       | text                           |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| skip_onboarding                     | boolean                        | false                             | false    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| registered_at                       | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| is_agreement_confirmed              | boolean                        |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| agreement_pdf_url                   | varchar(255)                   |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |
| agreement_confirm_date              | timestamp(0) without time zone |                                   | true     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                       |

## Constraints

| Name                             | Type        | Definition                                                                         |
| -------------------------------- | ----------- | ---------------------------------------------------------------------------------- |
| users_branch_id_foreign          | FOREIGN KEY | FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE                  |
| users_created_by_user_id_foreign | FOREIGN KEY | FOREIGN KEY (created_by_user_id) REFERENCES users(id) ON DELETE SET NULL           |
| users_pkey                       | PRIMARY KEY | PRIMARY KEY (id)                                                                   |
| users_email_unique               | UNIQUE      | UNIQUE (email)                                                                     |
| users_sex_id_foreign             | FOREIGN KEY | FOREIGN KEY (sex_id) REFERENCES sexes(id) ON DELETE SET NULL                       |
| users_user_status_id_foreign     | FOREIGN KEY | FOREIGN KEY (user_status_id) REFERENCES user_statuses(id) ON DELETE SET NULL       |
| users_nationality_id_foreign     | FOREIGN KEY | FOREIGN KEY (nationality_id) REFERENCES nationalities(id) ON DELETE SET NULL       |
| users_city_id_foreign            | FOREIGN KEY | FOREIGN KEY (city_id) REFERENCES cities(id) ON DELETE SET NULL                     |
| users_image_id_foreign           | FOREIGN KEY | FOREIGN KEY (image_id) REFERENCES files(id) ON DELETE SET NULL                     |
| users_signature_image_id_foreign | FOREIGN KEY | FOREIGN KEY (signature_image_id) REFERENCES files(id) ON DELETE SET NULL           |
| users_position_id_foreign        | FOREIGN KEY | FOREIGN KEY (position_id) REFERENCES positions(id) ON DELETE SET NULL              |
| users_home_number_id_foreign     | FOREIGN KEY | FOREIGN KEY (home_number_id) REFERENCES phone_numbers(id) ON DELETE SET NULL       |
| users_mobile_number_id_foreign   | FOREIGN KEY | FOREIGN KEY (mobile_number_id) REFERENCES phone_numbers(id) ON DELETE SET NULL     |
| users_bank_id_foreign            | FOREIGN KEY | FOREIGN KEY (bank_id) REFERENCES banks(id) ON DELETE SET NULL                      |
| users_verification_token_unique  | UNIQUE      | UNIQUE (verification_token)                                                        |
| users_profile_status_id_foreign  | FOREIGN KEY | FOREIGN KEY (profile_status_id) REFERENCES profile_statuses(id) ON DELETE SET NULL |
| users_bipo_id_unique             | UNIQUE      | UNIQUE (bipo_id)                                                                   |

## Indexes

| Name                            | Definition                                                                                            |
| ------------------------------- | ----------------------------------------------------------------------------------------------------- |
| users_pkey                      | CREATE UNIQUE INDEX users_pkey ON public.users USING btree (id)                                       |
| users_email_unique              | CREATE UNIQUE INDEX users_email_unique ON public.users USING btree (email)                            |
| users_verification_token_unique | CREATE UNIQUE INDEX users_verification_token_unique ON public.users USING btree (verification_token)  |
| users_bipo_id_unique            | CREATE UNIQUE INDEX users_bipo_id_unique ON public.users USING btree (bipo_id)                        |
| users_index_email_unique_lower  | CREATE UNIQUE INDEX users_index_email_unique_lower ON public.users USING btree (lower((email)::text)) |

## Relations

![er](public.users.svg)

---

> Generated by [tbls](https://github.com/k1LoW/tbls)
